<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frases de Recusa - Gupy</title>
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%2300A3E0'/%3E%3Cpath d='M50 20v15M50 80v-15M20 50h15M80 50h-15M29 29l11 11M71 29l-11 11M29 71l11-11M71 71l-11-11' stroke='white' stroke-width='8' stroke-linecap='round'/%3E%3C/svg%3E">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #f3f4f6; }
        .nav-item.active { background-color: #1e40af; color: white; }
        .nav-item { transition: all 0.2s; border-radius: 0.5rem; }
        .nav-item:hover { background-color: #334155; color: white; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .header-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.2em 1.2em;
            padding-right: 2rem;
            -webkit-appearance: none; appearance: none;
        }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        .modal-content { animation: fadeIn 0.2s ease-out forwards; }
        .chat-widget { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: bottom right; }
        .chat-open { transform: scale(1); opacity: 1; pointer-events: auto; }
        .chat-closed { transform: scale(0.9); opacity: 0; pointer-events: none; display: none; }
        .dash-card:hover { transform: translateY(-5px); }
        .quick-input { transition: all 0.2s; border: 1px solid #e2e8f0; }
        .quick-input:focus { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1); background: white; }
    </style>
</head>
<body class="h-screen overflow-hidden text-gray-800 bg-gray-50 flex flex-col">

    <div id="login-flow" class="flex h-screen w-full items-center justify-center bg-gradient-to-br from-blue-900 to-slate-900 absolute z-[100]">
        <div class="bg-white p-10 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up">
            <div class="text-center mb-8">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"><i class="fas fa-quote-right text-3xl text-blue-600"></i></div>
                <h1 class="text-3xl font-extrabold text-gray-800 tracking-tight">Gupy Frases</h1><p class="text-base text-gray-500 mt-2 font-medium">Sistema Interno de Gest√£o</p>
            </div>
            <form onsubmit="event.preventDefault(); fazerLogin();">
                <div class="mb-4"><label class="block text-sm font-bold text-gray-600 uppercase mb-1 ml-1">Usu√°rio / ID</label><input type="text" id="login-user" class="w-full p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50" required></div>
                <div class="mb-6"><label class="block text-sm font-bold text-gray-600 uppercase mb-1 ml-1">Senha</label><input type="password" id="login-pass" class="w-full p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50" required></div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3.5 rounded-xl shadow-lg transform transition hover:-translate-y-1 text-lg">Acessar Sistema</button>
            </form>
            <div class="mt-8 text-center border-t border-gray-100 pt-4"><p class="text-xs text-gray-400 font-bold uppercase tracking-widest">Desenvolvido por Pedro Gabriel</p></div>
        </div>
    </div>

    <div id="first-access-modal" class="hidden fixed inset-0 bg-slate-900/80 z-[110] flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md text-center modal-content">
            <div class="w-16 h-16 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl"><i class="fas fa-key"></i></div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Atualize sua Senha</h2>
            <p class="text-sm text-gray-500 mb-6">Primeiro acesso detectado. Defina uma nova senha.</p>
            <input type="password" id="new-password" placeholder="Nova Senha" class="w-full p-3 border rounded-xl mb-4 focus:ring-2 focus:ring-yellow-400 outline-none">
            <input type="password" id="confirm-password" placeholder="Confirmar Nova Senha" class="w-full p-3 border rounded-xl mb-6 focus:ring-2 focus:ring-yellow-400 outline-none">
            <button onclick="atualizarSenhaPrimeiroAcesso()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 rounded-xl transition">Salvar e Entrar</button>
        </div>
    </div>

    <div id="modal-cep" class="hidden fixed inset-0 z-[90] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden modal-content relative">
            <div class="bg-blue-600 px-8 py-5 border-b border-blue-500 flex justify-between items-center text-white">
                <h3 class="text-xl font-extrabold flex items-center gap-2"><i class="fas fa-map-marked-alt"></i> Endere√ßo Encontrado</h3>
                <button onclick="fecharModalCEP()" class="text-blue-200 hover:text-white transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-8">
                <div class="flex gap-2 mb-6">
                    <input type="text" id="cep-input" placeholder="Digite o CEP (apenas n√∫meros)" maxlength="9" class="flex-1 p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50 font-bold text-gray-700" onkeyup="if(event.key === 'Enter') buscarCEP()">
                    <button onclick="buscarCEP()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 rounded-xl transition shadow-lg"><i class="fas fa-search"></i></button>
                </div>
                <div id="cep-resultado" class="hidden space-y-4 bg-gray-50 p-5 rounded-xl border border-gray-100">
                    <div><label class="text-[10px] uppercase font-extrabold text-blue-500 tracking-wider">CEP</label><p id="cep-display-num" class="text-lg font-bold text-gray-800 border-b border-gray-200 pb-1 mt-0.5">...</p></div>
                    <div><label class="text-[10px] uppercase font-extrabold text-blue-500 tracking-wider">Rua / Logradouro</label><p id="cep-logradouro" class="text-base font-medium text-gray-700 border-b border-gray-200 pb-1 mt-0.5">...</p></div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="text-[10px] uppercase font-extrabold text-blue-500 tracking-wider">Bairro</label><p id="cep-bairro" class="text-base font-medium text-gray-700 border-b border-gray-200 pb-1 mt-0.5">...</p></div>
                        <div><label class="text-[10px] uppercase font-extrabold text-blue-500 tracking-wider">Cidade/UF</label><p id="cep-localidade" class="text-base font-medium text-gray-700 border-b border-gray-200 pb-1 mt-0.5">...</p></div>
                    </div>
                </div>
                <div id="cep-loading" class="hidden text-center py-4 text-blue-600 font-bold animate-pulse">Buscando...</div>
                <div class="mt-6 flex justify-end">
                     <button onclick="fecharModalCEP()" class="bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-2 px-6 rounded-xl transition">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-idade" class="hidden fixed inset-0 z-[90] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden modal-content relative">
            <div class="bg-purple-600 px-8 py-5 border-b border-purple-500 flex justify-between items-center text-white">
                <h3 class="text-xl font-extrabold flex items-center gap-2"><i class="fas fa-birthday-cake"></i> Idade Calculada</h3>
                <button onclick="fecharModalIdade()" class="text-purple-200 hover:text-white transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-8">
                <div class="hidden"><input id="nasc-input"></div>
                <div class="text-center mb-6 bg-purple-50 p-3 rounded-xl border border-purple-100">
                    <p class="text-xs font-bold text-purple-400 uppercase tracking-widest">Nascimento Informado</p>
                    <p id="data-nasc-display" class="text-lg font-extrabold text-purple-700 mt-1">--/--/----</p>
                </div>
                <div id="idade-resultado-box" class="text-center bg-white p-6 rounded-2xl border-2 border-purple-100 shadow-sm hidden">
                    <p class="text-xs text-gray-400 font-bold uppercase">Idade Atual</p>
                    <p id="idade-resultado" class="text-6xl font-extrabold text-purple-600 mt-2">--</p>
                    <p class="text-sm text-gray-500 font-bold mt-1">Anos</p>
                </div>
                 <div class="mt-6 flex justify-end">
                     <button onclick="fecharModalIdade()" class="bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-2 px-6 rounded-xl transition">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-dashboard-detail" class="hidden fixed inset-0 z-[80] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden modal-content flex flex-col max-h-[90vh]">
            <div class="bg-gray-50 px-8 py-5 border-b border-gray-100 flex justify-between items-center shrink-0">
                <h3 id="modal-dash-title" class="text-xl font-extrabold text-gray-800 flex items-center gap-2">Detalhes</h3>
                <button onclick="fecharModalDashboard()" class="text-gray-400 hover:text-red-500 transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div id="modal-dash-content" class="p-0 overflow-y-auto flex-1"></div>
            <div class="bg-gray-50 px-8 py-4 border-t border-gray-100 flex justify-end shrink-0">
                <button onclick="fecharModalDashboard()" class="bg-gray-200 hover:bg-gray-300 text-gray-600 px-6 py-2 rounded-xl font-bold transition">Fechar</button>
            </div>
        </div>
    </div>

    <div id="modal-frase" class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden modal-content relative">
            <div class="bg-gray-50 px-8 py-5 border-b border-gray-100 flex justify-between items-center">
                <h3 id="modal-title" class="text-xl font-extrabold text-gray-800 flex items-center gap-2"></h3>
                <button onclick="fecharModalFrase()" class="text-gray-400 hover:text-red-500 transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-8">
                <input type="hidden" id="id-frase">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div><label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Empresa</label><input id="inp-empresa" type="text" placeholder="Ex: Gupy" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition"></div>
                    <div><label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Motivo</label><input id="inp-motivo" type="text" placeholder="Ex: Feedback" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition"></div>
                    <div><label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Documento</label><input id="inp-doc" type="text" placeholder="Ex: Foto/RG" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition"></div>
                </div>
                <div class="mb-2"><label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Conte√∫do da Frase</label><textarea id="inp-conteudo" rows="5" class="w-full p-4 border rounded-xl text-lg text-gray-700 font-medium bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition" placeholder="Digite o texto aqui..."></textarea></div>
            </div>
            <div class="bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="fecharModalFrase()" class="px-6 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:bg-gray-200 transition">Cancelar</button>
                <button onclick="salvarFrase()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-2.5 rounded-xl font-bold shadow-lg shadow-blue-200 transition transform active:scale-95">Salvar Registro</button>
            </div>
        </div>
    </div>

    <div id="modal-usuario" class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden modal-content relative">
            <div class="bg-gray-50 px-8 py-5 border-b border-gray-100 flex justify-between items-center">
                <h3 id="modal-user-title" class="text-xl font-extrabold text-gray-800 flex items-center gap-2"></h3>
                <button onclick="fecharModalUsuario()" class="text-gray-400 hover:text-red-500 transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-8 space-y-4">
                <input type="hidden" id="id-user-edit">
                
                <div class="flex items-center justify-between bg-blue-50 p-3 rounded-xl border border-blue-100 mb-4">
                    <span class="text-xs font-extrabold text-blue-600 uppercase">Acesso ao Sistema</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="ativo-novo" class="sr-only peer" checked>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                        <span class="ml-3 text-xs font-bold text-gray-700" id="label-ativo">Ativo</span>
                    </label>
                </div>

                <div>
                    <label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Nome do Colaborador</label>
                    <input id="nome-novo" type="text" placeholder="Ex: Maria Silva" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition">
                </div>

                <div>
                    <label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Login (ID)</label>
                    <input id="user-novo" type="text" placeholder="Ex: 1040481" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition">
                </div>

                <div>
                    <label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Senha</label>
                    <input id="pass-novo" type="text" placeholder="Senha Inicial" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition">
                </div>
                
                <div>
                    <label class="text-xs font-extrabold text-gray-500 uppercase mb-1 block ml-1">Perfil</label>
                    <select id="perfil-novo" class="w-full p-3 border rounded-xl text-sm font-semibold bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition cursor-pointer">
                        <option value="user">üë§ Colaborador</option>
                        <option value="admin">üîë Administrador</option>
                    </select>
                </div>
            </div>
            <div class="bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-end gap-3">
                <button onclick="fecharModalUsuario()" class="px-6 py-2.5 rounded-xl text-sm font-bold text-gray-500 hover:bg-gray-200 transition">Cancelar</button>
                <button onclick="salvarUsuario()" id="btn-salvar-user" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-2.5 rounded-xl font-bold shadow-lg shadow-blue-200 transition transform active:scale-95">Salvar</button>
            </div>
        </div>
    </div>

    <div id="modal-motivos" class="hidden fixed inset-0 z-[80] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden modal-content flex flex-col max-h-[85vh]">
            <div class="bg-orange-50 px-8 py-5 border-b border-orange-100 flex justify-between items-center shrink-0">
                <div>
                    <h3 class="text-xl font-extrabold text-orange-800 flex items-center gap-2"><i class="fas fa-tags"></i> Organizar Motivos</h3>
                    <p class="text-xs text-orange-600 mt-1">Mescle duplicatas renomeando-as para o mesmo nome.</p>
                </div>
                <button onclick="document.getElementById('modal-motivos').classList.add('hidden')" class="text-orange-400 hover:text-orange-600 transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-0 overflow-y-auto flex-1 bg-white">
                <table class="w-full text-left text-sm">
                    <thead class="bg-gray-50 text-gray-500 font-bold border-b border-gray-100 sticky top-0"><tr><th class="px-6 py-3">Nome do Motivo</th><th class="px-6 py-3 text-center">Qtd.</th><th class="px-6 py-3 text-right">A√ß√£o</th></tr></thead>
                    <tbody id="lista-motivos-unificacao" class="divide-y divide-gray-100"></tbody>
                </table>
            </div>
            <div class="bg-gray-50 px-8 py-4 border-t border-gray-100 flex justify-end shrink-0"><button onclick="document.getElementById('modal-motivos').classList.add('hidden'); carregarFrases();" class="bg-white border border-gray-300 hover:bg-gray-100 text-gray-600 px-6 py-2 rounded-xl font-bold transition">Fechar e Atualizar</button></div>
        </div>
    </div>

    <div id="modal-documentos" class="hidden fixed inset-0 z-[80] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 transition-all">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden modal-content flex flex-col max-h-[85vh]">
            <div class="bg-blue-50 px-8 py-5 border-b border-blue-100 flex justify-between items-center shrink-0">
                <div>
                    <h3 class="text-xl font-extrabold text-blue-800 flex items-center gap-2"><i class="fas fa-file-alt"></i> Organizar Docs</h3>
                    <p class="text-xs text-blue-600 mt-1">Padronize nomes de documentos (Ex: RG, R.G.).</p>
                </div>
                <button onclick="document.getElementById('modal-documentos').classList.add('hidden')" class="text-blue-400 hover:text-blue-600 transition text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-0 overflow-y-auto flex-1 bg-white">
                <table class="w-full text-left text-sm">
                    <thead class="bg-gray-50 text-gray-500 font-bold border-b border-gray-100 sticky top-0"><tr><th class="px-6 py-3">Nome do Documento</th><th class="px-6 py-3 text-center">Qtd.</th><th class="px-6 py-3 text-right">A√ß√£o</th></tr></thead>
                    <tbody id="lista-documentos-unificacao" class="divide-y divide-gray-100"></tbody>
                </table>
            </div>
            <div class="bg-gray-50 px-8 py-4 border-t border-gray-100 flex justify-end shrink-0"><button onclick="document.getElementById('modal-documentos').classList.add('hidden'); carregarFrases();" class="bg-white border border-gray-300 hover:bg-gray-100 text-gray-600 px-6 py-2 rounded-xl font-bold transition">Fechar e Atualizar</button></div>
        </div>
    </div>

    <div id="app-flow" class="hidden flex flex-col h-screen">
        <nav class="bg-slate-900 text-slate-300 h-16 flex-shrink-0 shadow-lg z-50">
            <div class="container mx-auto px-6 h-full flex items-center justify-between">
                <div class="flex items-center gap-8">
                    <div class="flex items-center gap-2 text-white cursor-pointer" onclick="navegar('biblioteca')"><i class="fas fa-quote-right text-blue-500 text-xl"></i><span class="font-extrabold text-xl tracking-tight">Gupy<span class="text-blue-500">Frases</span></span></div>
                    <div class="hidden md:flex items-center gap-2">
                        <button onclick="navegar('biblioteca')" id="menu-biblioteca" class="nav-item px-4 py-2 text-sm font-bold"><i class="fas fa-book-open mr-2"></i>Biblioteca</button>
                        <div id="admin-menu-items" class="hidden flex gap-2 border-l border-slate-700 pl-2 ml-2">
                            <button onclick="navegar('equipe')" id="menu-equipe" class="nav-item px-4 py-2 text-sm font-bold"><i class="fas fa-users-cog mr-2"></i>Administra√ß√£o</button>
                            <button onclick="navegar('logs')" id="menu-logs" class="nav-item px-4 py-2 text-sm font-bold"><i class="fas fa-history mr-2"></i>Logs</button>
                            <button onclick="navegar('dashboard')" id="menu-dashboard" class="nav-item px-4 py-2 text-sm font-bold"><i class="fas fa-chart-line mr-2"></i>Dashboard</button>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-4 border-l border-slate-700 pl-6">
                    <div class="text-right hidden sm:block">
                        <p id="user-name-display" class="text-sm font-bold text-white leading-none">Usu√°rio</p>
                        <p id="user-role-display" class="text-[10px] text-blue-400 mt-1 font-extrabold uppercase">Carregando...</p>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold shadow-md border-2 border-slate-800 text-lg"><span id="avatar-initial">U</span></div>
                    <button onclick="logout()" class="text-slate-400 hover:text-red-400 transition ml-2" title="Sair"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </nav>

        <header class="bg-white border-b border-gray-200 py-4 z-40">
            <div class="container mx-auto px-6 flex flex-col lg:flex-row gap-4 items-stretch lg:items-center">
                <div class="relative flex-1 group">
                    <input type="text" id="global-search" oninput="debounceBusca()" placeholder="üîé Pesquisar frases, documentos..." 
                        class="w-full pl-12 pr-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-gray-700 font-semibold transition-all outline-none">
                    <i class="fas fa-search absolute left-4 top-3.5 text-gray-400 text-lg group-focus-within:text-blue-500 transition-colors"></i>
                </div>
                <div class="flex gap-3 shrink-0 flex-wrap sm:flex-nowrap">
                    <div class="relative group flex-1 sm:flex-none sm:w-40">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-purple-400"><i class="fas fa-birthday-cake"></i></div>
                        <input type="text" id="quick-idade" placeholder="DD/MM/AAAA" maxlength="10" class="quick-input w-full pl-9 pr-2 py-3 rounded-xl text-sm font-bold text-gray-600 outline-none bg-purple-50/50 border-purple-100 focus:ring-purple-200 placeholder-purple-300" oninput="mascaraData(this)" onkeyup="if(event.key === 'Enter') calcularIdadeHeader()">
                    </div>
                    <div class="relative group flex-1 sm:flex-none sm:w-40">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-blue-400"><i class="fas fa-map-marker-alt"></i></div>
                        <input type="text" id="quick-cep" placeholder="CEP" maxlength="9" class="quick-input w-full pl-9 pr-2 py-3 rounded-xl text-sm font-bold text-gray-600 outline-none bg-blue-50/50 border-blue-100 focus:ring-blue-200 placeholder-blue-300" onkeyup="if(event.key === 'Enter') buscarCEPHeader()">
                    </div>
                </div>
            </div>
        </header>

        <div id="filter-bar" class="bg-gray-50 border-b border-gray-200 py-2.5 z-30 sticky top-0">
            <div class="container mx-auto px-6 flex items-center gap-3 overflow-x-auto whitespace-nowrap pb-1 lg:pb-0 scrollbar-hide">
                <span class="text-xs font-extrabold text-gray-400 uppercase tracking-widest mr-2 shrink-0"><i class="fas fa-filter mr-1"></i> Filtros:</span>
                <select id="filtro-empresa" onchange="aplicarFiltros('select')" class="header-select py-1.5 pl-3 pr-8 rounded-lg border border-gray-200 bg-white text-xs font-bold text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none cursor-pointer hover:bg-gray-50 transition shadow-sm"><option value="">üè¢ Todas Empresas</option></select>
                <select id="filtro-motivo" onchange="aplicarFiltros('select')" class="header-select py-1.5 pl-3 pr-8 rounded-lg border border-gray-200 bg-white text-xs font-bold text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none cursor-pointer hover:bg-gray-50 transition shadow-sm"><option value="">üéØ Todos Motivos</option></select>
                <select id="filtro-doc" onchange="aplicarFiltros('select')" class="header-select py-1.5 pl-3 pr-8 rounded-lg border border-gray-200 bg-white text-xs font-bold text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none cursor-pointer hover:bg-gray-50 transition shadow-sm"><option value="">üìÑ Todos Documentos</option></select>
                <button onclick="limparFiltros()" class="text-xs font-bold text-red-400 hover:text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-lg transition" title="Limpar Filtros"><i class="fas fa-times mr-1"></i> Limpar</button>
                <div class="w-px h-6 bg-gray-200 mx-2 shrink-0"></div>
                <button id="btn-add-global" onclick="abrirModalFrase()" class="hidden bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold px-4 py-1.5 rounded-lg shadow-sm transition items-center gap-2"><i class="fas fa-plus"></i> Nova Frase</button>
            </div>
        </div>

        <main class="flex-1 overflow-y-auto bg-gray-100 p-6">
            <div class="container mx-auto max-w-7xl h-full flex flex-col">
                
                <section id="view-biblioteca" class="view-section flex-grow">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-extrabold text-gray-800 flex items-center gap-2" id="page-title"><i class="fas fa-book-open text-blue-500 opacity-80"></i> Biblioteca</h2>
                        <span id="contador-resultados" class="text-xs font-extrabold text-gray-400 uppercase tracking-wider bg-white px-3 py-1 rounded-full shadow-sm border border-gray-100">Carregando...</span>
                    </div>
                    <div id="grid-frases" class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full pb-20"></div>
                </section>

                <section id="view-dashboard" class="view-section hidden flex-grow space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200"><h4 class="text-xs font-extrabold text-gray-400 uppercase">Usu√°rios (90d)</h4><p id="kpi-users" class="text-3xl font-extrabold text-blue-600">0</p></div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200"><h4 class="text-xs font-extrabold text-gray-400 uppercase">C√≥pias (90d)</h4><p id="kpi-copies" class="text-3xl font-extrabold text-green-500">0</p></div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200"><h4 class="text-xs font-extrabold text-gray-400 uppercase">Edi√ß√µes (90d)</h4><p id="kpi-edits" class="text-3xl font-extrabold text-yellow-500">0</p></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div onclick="abrirModalDashboard('RANKING')" class="dash-card bg-white p-6 rounded-2xl shadow-sm border border-gray-200 cursor-pointer transition flex flex-col items-center text-center"><div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center text-xl mb-3"><i class="fas fa-trophy"></i></div><h4 class="font-bold text-gray-800">Ranking</h4></div>
                        <div onclick="abrirModalDashboard('TOP')" class="dash-card bg-white p-6 rounded-2xl shadow-sm border border-gray-200 cursor-pointer transition flex flex-col items-center text-center"><div class="w-12 h-12 bg-orange-50 text-orange-500 rounded-xl flex items-center justify-center text-xl mb-3"><i class="fas fa-fire"></i></div><h4 class="font-bold text-gray-800">Top Frases</h4></div>
                        <div onclick="abrirModalDashboard('GHOSTS')" class="dash-card bg-white p-6 rounded-2xl shadow-sm border border-gray-200 cursor-pointer transition flex flex-col items-center text-center"><div class="w-12 h-12 bg-gray-100 text-gray-500 rounded-xl flex items-center justify-center text-xl mb-3"><i class="fas fa-ghost"></i></div><h4 class="font-bold text-gray-800">Inativos</h4></div>
                        <div onclick="abrirModalDashboard('AUDIT')" class="dash-card bg-white p-6 rounded-2xl shadow-sm border border-red-50 cursor-pointer transition flex flex-col items-center text-center hover:bg-red-50"><div class="w-12 h-12 bg-red-100 text-red-500 rounded-xl flex items-center justify-center text-xl mb-3"><i class="fas fa-broom"></i></div><h4 class="font-bold text-gray-800">Auditoria</h4></div>
                    </div>
                </section>

                <section id="view-logs" class="view-section hidden flex-grow space-y-6">
                    <div class="flex justify-between items-center mb-2">
                        <div>
                            <h2 class="text-xl font-extrabold text-gray-800 flex items-center gap-2">
                                <i class="fas fa-history text-blue-500"></i> Centro de Atividade
                            </h2>
                            <p class="text-xs text-gray-500 font-bold mt-1">Monitoramento em tempo real das √∫ltimas a√ß√µes.</p>
                        </div>
                        <button onclick="carregarLogs()" class="bg-white border border-gray-200 text-gray-600 hover:text-blue-600 px-4 py-2 rounded-xl text-xs font-bold shadow-sm transition flex items-center gap-2">
                            <i class="fas fa-sync-alt"></i> Atualizar Agora
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-full pb-10">
                        
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full">
                            <div class="bg-green-50/50 px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                                <h3 class="font-extrabold text-green-700 text-sm flex items-center gap-2">
                                    <i class="fas fa-shield-alt"></i> Acessos & Seguran√ßa
                                </h3>
                                <span class="text-[10px] font-bold bg-white text-green-600 px-2 py-1 rounded border border-green-100 shadow-sm">√öltimos 10</span>
                            </div>
                            <div id="col-acessos" class="flex-1 overflow-y-auto p-4 space-y-3 max-h-[500px]">
                                <p class="text-center text-gray-300 text-xs py-10">Carregando...</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full">
                            <div class="bg-blue-50/50 px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                                <h3 class="font-extrabold text-blue-700 text-sm flex items-center gap-2">
                                    <i class="fas fa-rocket"></i> Produtividade (Uso)
                                </h3>
                                <span class="text-[10px] font-bold bg-white text-blue-600 px-2 py-1 rounded border border-blue-100 shadow-sm">√öltimos 10</span>
                            </div>
                            <div id="col-uso" class="flex-1 overflow-y-auto p-4 space-y-3 max-h-[500px]">
                                <p class="text-center text-gray-300 text-xs py-10">Carregando...</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full">
                            <div class="bg-orange-50/50 px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                                <h3 class="font-extrabold text-orange-700 text-sm flex items-center gap-2">
                                    <i class="fas fa-tools"></i> Auditoria & Gest√£o
                                </h3>
                                <span class="text-[10px] font-bold bg-white text-orange-600 px-2 py-1 rounded border border-orange-100 shadow-sm">√öltimos 10</span>
                            </div>
                            <div id="col-auditoria" class="flex-1 overflow-y-auto p-4 space-y-3 max-h-[500px]">
                                <p class="text-center text-gray-300 text-xs py-10">Carregando...</p>
                            </div>
                        </div>

                    </div>
                </section>

                <section id="view-equipe" class="view-section hidden flex-grow">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div onclick="abrirGerenciadorMotivos()" class="bg-white p-6 rounded-2xl shadow-sm border border-orange-100 cursor-pointer hover:shadow-md transition flex items-center gap-4 group">
                            <div class="w-12 h-12 bg-orange-50 text-orange-500 rounded-full flex items-center justify-center text-xl group-hover:scale-110 transition"><i class="fas fa-tags"></i></div>
                            <div><h4 class="font-bold text-gray-700">Organizar Motivos</h4><p class="text-xs text-gray-400">Mesclar duplicados</p></div>
                        </div>
                        <div onclick="abrirGerenciadorDocumentos()" class="bg-white p-6 rounded-2xl shadow-sm border border-blue-100 cursor-pointer hover:shadow-md transition flex items-center gap-4 group">
                            <div class="w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center text-xl group-hover:scale-110 transition"><i class="fas fa-file-alt"></i></div>
                            <div><h4 class="font-bold text-gray-700">Organizar Documentos</h4><p class="text-xs text-gray-400">Padronizar nomes</p></div>
                        </div>
                        <div onclick="padronizarTodasFrases()" class="bg-white p-6 rounded-2xl shadow-sm border border-purple-100 cursor-pointer hover:shadow-md transition flex items-center gap-4 group">
                            <div class="w-12 h-12 bg-purple-50 text-purple-500 rounded-full flex items-center justify-center text-xl group-hover:scale-110 transition"><i class="fas fa-magic"></i></div>
                            <div><h4 class="font-bold text-gray-700">Padroniza√ß√£o M√°gica</h4><p class="text-xs text-gray-400">Limpar formata√ß√£o</p></div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-extrabold text-gray-800 flex items-center gap-2">
                            <i class="fas fa-users text-blue-500"></i> Gest√£o de Membros
                        </h2>
                        <div class="flex gap-2">
                            <button onclick="abrirModalUsuario()" class="bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold px-4 py-2 rounded-lg shadow-sm transition flex items-center gap-2">
                                <i class="fas fa-user-plus"></i> Novo Membro
                            </button>
                            <button onclick="carregarEquipe()" class="text-blue-600 text-xs font-bold hover:underline bg-blue-50 px-3 py-2 rounded-lg">
                                <i class="fas fa-sync"></i>
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8" id="lista-equipe-container">
                        </div>

                    <div class="bg-white rounded-2xl shadow-sm border border-red-100 p-6">
                        <h4 class="text-sm font-extrabold text-gray-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-database text-red-400"></i> Banco de Dados
                        </h4>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button onclick="baixarBackup()" class="flex-1 bg-gray-50 border border-gray-200 text-gray-600 hover:bg-white hover:border-gray-300 font-bold py-3 rounded-xl text-xs transition flex items-center justify-center gap-2">
                                <i class="fas fa-download"></i> Baixar Backup JSON
                            </button>
                            <div class="flex-1 relative">
                                <button onclick="document.getElementById('input-backup').click()" class="w-full bg-red-50 border border-red-100 text-red-600 hover:bg-red-100 font-bold py-3 rounded-xl text-xs transition flex items-center justify-center gap-2">
                                    <i class="fas fa-upload"></i> Restaurar Backup
                                </button>
                                <input type="file" id="input-backup" class="hidden" onchange="importarBackup(this)">
                            </div>
                        </div>
                    </div>
                </section>
                
                <footer class="mt-auto pt-6 text-center text-[10px] font-bold text-gray-400 uppercase tracking-widest pb-4">Desenvolvido por Pedro Gabriel</footer>
            </div>
        </main>

        <div id="chat-container" class="fixed bottom-6 right-6 z-50">
            <button onclick="toggleChat()" id="chat-toggle-btn" class="w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-2xl flex items-center justify-center transition transform hover:scale-110 active:scale-95"><i class="fas fa-comments text-2xl"></i><span id="badge-online" class="absolute top-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full hidden"></span></button>
            <div id="chat-window" class="absolute bottom-16 right-0 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden flex flex-col chat-widget chat-closed" style="height: 450px;">
                <div class="bg-slate-900 text-white p-3 flex justify-between items-center shadow-md"><div><h4 class="font-bold text-sm">Chat da Equipe</h4><span id="online-count" class="text-[10px] text-slate-300">Offline</span></div><button onclick="toggleChat()"><i class="fas fa-times"></i></button></div>
                <div id="online-users-list" class="bg-slate-50 border-b border-gray-200 px-4 py-1 text-[10px] text-gray-500 hidden"></div>
                <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-3 bg-gray-50 text-xs"></div>
                <div class="p-2 bg-white border-t border-gray-100 flex gap-2"><input type="text" id="chat-input" class="flex-1 bg-gray-100 border-0 rounded-lg px-3 py-2 text-xs focus:ring-1 focus:ring-blue-500 outline-none" placeholder="Mensagem..." onkeypress="if(event.key === 'Enter') enviarMensagem()"><button onclick="enviarMensagem()" class="bg-blue-600 text-white w-8 h-8 rounded-lg flex items-center justify-center"><i class="fas fa-paper-plane text-xs"></i></button></div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/biblioteca.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/logs.js"></script>
    <script src="js/equipe.js"></script>
</body>
</html>
